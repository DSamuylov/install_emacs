#+TITLE: Emacs Configuration

#+STARTUP: content indent

:PROPERTIES:
:tangle: init-literate.el
:END:

* Header

#+begin_src emacs-lisp
  ;;; ------------------------------------------
  ;;; Do not edit this file. It was tangled from
  ;;; an org file.
  ;;; ------------------------------------------
#+end_src

* Configuration
** Packages
#+begin_src emacs-lisp
  (require 'package)
  ;; Add melpa to package repos
  ;; (add-to-list 'package-archives '("melpa" . "http://melpa.milkbox.net/packages/") t)
  (package-initialize)
  ;; list the packages you want
  (setq package-list '(monokai-theme
                       ac-math
                       anaconda-mode
                       company
                       company-go
                       company-math
                       fill-column-indicator
                       browse-kill-ring))
  ;; fetch the list of packages available
  (unless package-archive-contents
    (package-refresh-contents))
  ;; install the missing packages
  (dolist (package package-list)
    (unless (package-installed-p package)
      (package-install package)))
#+end_src
** Appearance

*** General

#+begin_src emacs-lisp
  ;; No splash screen:
  (setq inhibit-startup-message t)
  ;; Highlight current line
  (global-hl-line-mode 1)
  ;;
#+end_src

*** The default font
#+begin_src emacs-lisp
  ;; (add-to-list 'default-frame-alist '(font . "Monospace-15"))
  (add-to-list 'default-frame-alist '(font . "monaco-15"))
#+end_src

*** Line settings
#+begin_src emacs-lisp
  ;; Always display line and column numbers
  (setq line-number-mode t)
  (setq column-number-mode t)
  (setq fill-column 79)
#+end_src

*** Window
#+begin_src emacs-lisp
  ;; Remove scrollbars and toolbar:
  (if (display-graphic-p)
    (progn
      (tool-bar-mode -1)
      (scroll-bar-mode -1)))
#+end_src

*** Indentation
#+begin_src emacs-lisp
  ;; use spaces only
  (setq indent-tabs-mode nil)
#+end_src
*** Theme
#+begin_src emacs-lisp
  ;; load color theme
  (load-theme 'monokai t)
  (setq monokai-use-variable-pitch nil)
#+end_src
*** Behaviour
#+begin_src emacs-lisp
  ;; Save minibuffer history
  (savehist-mode 1)
  (setq history-length 1000)
  ;; List buffers in the current buffer
  (global-set-key "\C-x\C-b" 'buffer-menu)
#+end_src
*** Calendar
#+begin_src emacs-lisp
  ;; Calender should start on Monday
  (setq calendar-week-start-day 1)
#+end_src
** Sound effects

How can I stop Emacs making noise when scrolling and hitting the top
of bottom of añ buffer when using the touchpad of my Macbook?
http://stackoverflow.com/questions/8010552/how-can-i-stop-emacs-cocoa-osx-making-noise-when-scrolling-and-hitting-the-top

#+begin_src emacs-lisp
(setq ring-bell-function #'ignore)
#+end_src

** Org

#+begin_src emacs-lisp
  ;; same effect for `tab' as in the language major mode buffer
  ;; http://stackoverflow.com/a/19319921/597069
  (setq org-src-tab-acts-natively t)

  ;; http://orgmode.org/worg/org-contrib/babel/examples/fontify-src-code-blocks.html
  (setq org-src-fontify-natively t)
#+end_src

** Babel

#+begin_src emacs-lisp
  (org-babel-do-load-languages
   'org-babel-load-languages
   '((R . t)
     (matlab . t)
     (python . t)
     ))

  ;; Don't ask for confirmation on every C-c C-c code-block compile.
  (setq org-confirm-babel-evaluate nil)
#+end_src

** Auto-completion (general)
The company-complete-common is the function that does autocompletition

#+begin_src emacs-lisp
  (require 'company)
  ;; https://github.com/nsf/gocode/tree/master/emacs-company
  (require 'company-go)
  ;; bigger popup window
  (setq company-tooltip-limit 20)
  ;; decrease delay before autocompletion popup shows
  (setq company-idle-delay 0)
  ;; remove annoying blinking
  (setq company-echo-delay 0)
  ; start autocompletion only after typing
  (add-hook 'after-init-hook 'global-company-mode)

  (setq company-minimum-prefix-length 1)
#+end_src

** Column marker
#+begin_src emacs-lisp
  (require 'fill-column-indicator)
  (setq fci-rule-width 1)
  ;; enable the mode by default
  (add-hook 'after-change-major-mode-hook 'fci-mode)
#+end_src

** Line length

#+begin_src emacs-lisp
  ;; broken lines automatically when they become too wide
  (add-hook 'after-change-major-mode-hook 'auto-fill-mode)
  ;; shortcut to allign two indentations
  (global-set-key (kbd "C-c i") 'indent-relative)
#+end_src

** Trailing white spaces
#+begin_src emacs-lisp
  (require 'whitespace)
  (add-hook 'after-change-major-mode-hook 'whitespace-mode)

  ;; make whitespace-mode use just basic coloring
  (setq whitespace-style
        (quote (newline newline-mark
                trailing
                face)))

  ;; How to make whitespace-mode use the pilcrow sign “¶” for newline
  ;; instead of the dollar sign?
  ;; http://ergoemacs.org/emacs/whitespace-mode.html
  (setq whitespace-display-mappings
        '(
          (space-mark 32 [183] [46])    ; 32 SPACE, 183 MIDDLE DOT 46 FULL STOP
          (newline-mark 10 [182 10])    ; 10 LINE FEED
          (tab-mark 9 [9655 9] [92 9])  ; 9 TAB, 9655 WHITE RIGHT-POINTING TRIANGLE
          )
        )

  (add-hook 'before-save-hook 'delete-trailing-whitespace)
#+end_src

** Kill ring
#+begin_src emacs-lisp
 (require 'browse-kill-ring)
 (browse-kill-ring-default-keybindings)
#+end_src

** Parenthesis
#+begin_src emacs-lisp
  (require 'paren)
  (show-paren-mode 1)
  (setq show-paren-delay 0)
  (set-face-background 'show-paren-match (face-background 'default))
  (set-face-foreground 'show-paren-match "#def")
  (set-face-attribute 'show-paren-match nil :weight 'extra-bold)
#+end_src
